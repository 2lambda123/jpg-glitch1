function m(a){a&&a.data&&(a.data.setStorageKey&&h(a.data.setStorageKey),a.data.add&&j(a.data.add),a.data.removeCompletely&&f(a.data.removeCompletely),a.data.removeLocalData&&g(a.data.removeLocalData),a.data.removeImgurData&&n(a.data.removeImgurData),a.data.load&&i(),a.data.save&&c(),a.data.loadItem&&k(a.data.loadItem))}function b(a,b){if("string"==typeof a){"undefined"==typeof b&&(b=a);var c={};c[a]=b,self.postMessage(c)}}function e(a){b("error",a)}function h(a){a&&(d=a)}function j(d){if(d){var f=l(d);a[f]&&a[f].deleteHash===d.deleteHash&&a[f].publicUrl===d.publicUrl&&a[f].imgurID===d.imgurID?e("file.message.before"):(d.timestamp=Date.now(),a[f]=d,c(function(){b("statusmessage","file.message.save")}))}}function f(d){d&&a[d]&&(a[d].deleteHash||a[d].publicUrl||a[d].imgurID||a[d].values||a[d].src?console&&console.log("cant delete storage item because theres still some data left",a[d]):(b("removeall",a[d]),delete a[d],c(function(){b("statusmessage","file.message.save")})))}function g(d){d&&a[d]&&(a[d].src&&(delete a[d].src,b("removelocaldata",a[d])),a[d].values&&delete a[d].values,a[d].deleteHash||a[d].publicUrl||a[d].imgurID||f(d),c())}function n(d){d&&a[d]&&(a[d].deleteHash&&(b("removeimgurdata",a[d]),delete a[d].deleteHash),a[d].publicUrl&&delete a[d].publicUrl,a[d].imgurID&&delete a[d].imgurID,a[d].src||a[d].values||f(d),c())}function i(f){localforage.getItem(d,function(g,d){g?(e("file.error.load"),console&&console.log("localforage error",g)):(a=d&&d.entries?d.entries:{},b("update",a),isFirstVisit=d&&d.lastVisit?!1:!0,isFirstVisit&&(b("firstvisit"),c()),"function"==typeof f&&f())})}function c(c){localforage.setItem(d,{entries:a,lastVisit:Date.now()},function(f,d){f?(e("file.error.save"),console&&console.log("localforage error",f)):d?(a=d.entries,b("update",a),b("save"),"function"==typeof c&&c()):console&&console.log("no data was saved",d)})}function k(c){a[c]&&b("loaditem",{uid:c,entries:a[c]})}function l(a){var c,b="N"+a.name+"S"+a.src+"L"+a.thumbnail.length||"0V";for(c in a.values)b+=c.substr(0,2),b+=a.values[c];return md5(b)}function o(){var c,d,b,e;for(e in a)b=a[e].timestamp,b&&(!c||b>d)&&(c=e,d=b);return c}var d,a;"Promise"in("undefined"!=typeof window?window:self)&&!function(b,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.localforage=a():b.localforage=a()}(this,function(){return function(c){function a(d){if(b[d])return b[d].exports;var e=b[d]={exports:{},id:d,loaded:!1};return c[d].call(e.exports,e,e.exports,a),e.loaded=!0,e.exports}var b={};return a.m=c,a.c=b,a.p="",a(0)}([function(c,b,a){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0,function(){function m(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function g(){var c,a,b;for(c=1;c<arguments.length;c++)if(a=arguments[c])for(b in a)a.hasOwnProperty(b)&&(j(a[b])?arguments[0][b]=a[b].slice():arguments[0][b]=a[b]);return arguments[0]}function h(b){for(var a in c)if(c.hasOwnProperty(a)&&c[a]===b)return!0;return!1}var f={},c={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},l=[c.INDEXEDDB,c.WEBSQL,c.LOCALSTORAGE],e=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],k={description:"",driver:l.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},i=function(a){var d=d||a.indexedDB||a.webkitIndexedDB||a.mozIndexedDB||a.OIndexedDB||a.msIndexedDB,b={};return b[c.WEBSQL]=!!a.openDatabase,b[c.INDEXEDDB]=!!function(){if("undefined"!=typeof a.openDatabase&&a.navigator&&a.navigator.userAgent&&/Safari/.test(a.navigator.userAgent)&&!/Chrome/.test(a.navigator.userAgent))return!1;try{return d&&"function"==typeof d.open&&"undefined"!=typeof a.IDBKeyRange}catch(b){return!1}}(),b[c.LOCALSTORAGE]=!!function(){try{return a.localStorage&&"setItem"in a.localStorage&&a.localStorage.setItem}catch(b){return!1}}(),b}(this),j=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},n=function(){function b(a){d(this,b),this.INDEXEDDB=c.INDEXEDDB,this.LOCALSTORAGE=c.LOCALSTORAGE,this.WEBSQL=c.WEBSQL,this._defaultConfig=g({},k),this._config=g({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return b.prototype.config=function(a){if("object"==typeof a){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a)"storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),this._config[b]=a[b];return"driver"in a&&a.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof a?this._config[a]:this._config},b.prototype.defineDriver=function(a,c,d){var b=new Promise(function(n,b){var g,j,m,k,c,d,l;try{if(g=a._driver,j=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),m=new Error("Custom driver name already in use: "+a._driver),!a._driver)return void b(j);if(h(a._driver))return void b(m);for(k=e.concat("_initStorage"),c=0;c<k.length;c++)if(d=k[c],!d||!a[d]||"function"!=typeof a[d])return void b(j);l=Promise.resolve(!0),"_support"in a&&(l=a._support&&"function"==typeof a._support?a._support():Promise.resolve(!!a._support)),l.then(function(b){i[g]=b,f[g]=a,n()},b)}catch(o){b(o)}});return b.then(c,d),b},b.prototype.driver=function(){return this._driver||null},b.prototype.getDriver=function(b,e,g){var c=this,d=function(){if(h(b))switch(b){case c.INDEXEDDB:return new Promise(function(b,c){b(a(1))});case c.LOCALSTORAGE:return new Promise(function(b,c){b(a(2))});case c.WEBSQL:return new Promise(function(b,c){b(a(4))})}else if(f[b])return Promise.resolve(f[b]);return Promise.reject(new Error("Driver not found."))}();return d.then(e,g),d},b.prototype.getSerializer=function(b){var c=new Promise(function(b,c){b(a(3))});return b&&"function"==typeof b&&c.then(function(a){b(a)}),c},b.prototype.ready=function(b){var a=this,c=a._driverSet.then(function(){return null===a._ready&&(a._ready=a._initDriver()),a._ready});return c.then(b,b),c},b.prototype.setDriver=function(b,f,g){function c(){a._config.driver=a.driver()}function h(b){return function(){function e(){for(var f,g;d<b.length;)return f=b[d],d++,a._dbInfo=null,a._ready=null,a.getDriver(f).then(function(b){return a._extend(b),c(),a._ready=a._initStorage(a._config),a._ready})["catch"](e);return c(),g=new Error("No available storage method found."),a._driverSet=Promise.reject(g),a._driverSet}var d=0;return e()}}var d,e,a=this;return j(b)||(b=[b]),d=this._getSupportedDrivers(b),e=null!==this._driverSet?this._driverSet["catch"](function(){return Promise.resolve()}):Promise.resolve(),this._driverSet=e.then(function(){var b=d[0];return a._dbInfo=null,a._ready=null,a.getDriver(b).then(function(b){a._driver=b._driver,c(),a._wrapLibraryMethodsWithReady(),a._initDriver=h(d)})})["catch"](function(){c();var b=new Error("No available storage method found.");return a._driverSet=Promise.reject(b),a._driverSet}),this._driverSet.then(f,g),this._driverSet},b.prototype.supports=function(a){return!!i[a]},b.prototype._extend=function(a){g(this,a)},b.prototype._getSupportedDrivers=function(c){var a,d,b,e=[];for(a=0,d=c.length;d>a;a++)b=c[a],this.supports(b)&&e.push(b);return e},b.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0;a<e.length;a++)m(this,e[a])},b.prototype.createInstance=function(a){return new b(a)},b}(),o=new n;b["default"]=o}.call("undefined"!=typeof window?window:self),c.exports=b["default"]},function(b,a){"use strict";a.__esModule=!0,function(){function j(a,c){var f,e,d;a=a||[],c=c||{};try{return new Blob(a,c)}catch(g){if("TypeError"!==g.name)throw g;for(f=b.BlobBuilder||b.MSBlobBuilder||b.MozBlobBuilder||b.WebKitBlobBuilder,e=new f,d=0;d<a.length;d+=1)e.append(a[d]);return e.getBlob(c.type)}}function p(b){var a,c=b.length,d=new ArrayBuffer(c),e=new Uint8Array(d);for(a=0;c>a;a++)e[a]=b.charCodeAt(a);return d}function B(a){return new Promise(function(c,d){var b=new XMLHttpRequest;b.open("GET",a),b.withCredentials=!0,b.responseType="arraybuffer",b.onreadystatechange=function(){return 4===b.readyState?200===b.status?c({response:b.response,type:b.getResponseHeader("Content-Type")}):void d({status:b.status,response:b.response}):void 0},b.send()})}function A(a){return new Promise(function(b,e){var f=j([""],{type:"image/png"}),c=a.transaction([d],"readwrite");c.objectStore(d).put(f,"key"),c.oncomplete=function(){var f=a.transaction([d],"readwrite"),c=f.objectStore(d).get("key");c.onerror=e,c.onsuccess=function(c){var d=c.target.result,a=URL.createObjectURL(d);B(a).then(function(a){b(!(!a||"image/png"!==a.type))},function(){b(!1)}).then(function(){URL.revokeObjectURL(a)})}}})["catch"](function(){return!1})}function z(a){return"boolean"==typeof g?Promise.resolve(g):A(a).then(function(a){return g=a})}function y(a){return new Promise(function(c,d){var b=new FileReader;b.onerror=d,b.onloadend=function(b){var d=btoa(b.target.result||"");c({__local_forage_encoded_blob:!0,data:d,type:a.type})},b.readAsBinaryString(a)})}function h(a){var b=p(atob(a.data));return j([b],{type:a.type})}function i(a){return a&&a.__local_forage_encoded_blob}function x(d){function k(){return Promise.resolve()}var j,b,e,c,g,h,i=this,a={db:null};if(d)for(j in d)a[j]=d[j];for(f||(f={}),b=f[a.name],b||(b={forages:[],db:null},f[a.name]=b),b.forages.push(this),e=[],c=0;c<b.forages.length;c++)g=b.forages[c],g!==this&&e.push(g.ready()["catch"](k));return h=b.forages.slice(0),Promise.all(e).then(function(){return a.db=b.db,w(a)}).then(function(b){return a.db=b,u(a,i._defaultConfig.version)?n(a):b}).then(function(e){var c,d;for(a.db=b.db=e,i._dbInfo=a,c=0;c<h.length;c++)d=h[c],d!==i&&(d._dbInfo.db=a.db,d._dbInfo.version=a.version)})}function w(a){return l(a,!1)}function n(a){return l(a,!0)}function l(a,c){return new Promise(function(h,i){var g,f;if(a.db){if(!c)return h(a.db);a.db.close()}g=[a.name],c&&g.push(a.version),f=e.open.apply(e,g),c&&(f.onupgradeneeded=function(c){var e=f.result;try{e.createObjectStore(a.storeName),c.oldVersion<=1&&e.createObjectStore(d)}catch(g){if("ConstraintError"!==g.name)throw g;b.console.warn('The database "'+a.name+'" has been upgraded from version '+c.oldVersion+" to version "+c.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),f.onerror=function(){i(f.error)},f.onsuccess=function(){h(f.result)}})}function u(a,g){var c,e,f,d;return a.db?(c=!a.db.objectStoreNames.contains(a.storeName),e=a.version<a.db.version,f=a.version>a.db.version,e&&(a.version!==g&&b.console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),f||c?(c&&(d=a.db.version+1,d>a.version&&(a.version=d)),!0):!1):!0}function o(a,f){var d,e=this;return"string"!=typeof a&&(b.console.warn(a+" used as a key, but it is not a string."),a=String(a)),d=new Promise(function(c,b){e.ready().then(function(){var f=e._dbInfo,g=f.db.transaction(f.storeName,"readonly").objectStore(f.storeName),d=g.get(a);d.onsuccess=function(){var a=d.result;void 0===a&&(a=null),i(a)&&(a=h(a)),c(a)},d.onerror=function(){b(d.error)}})["catch"](b)}),c(d,f),d}function C(d,e){var a=this,b=new Promise(function(b,c){a.ready().then(function(){var f=a._dbInfo,g=f.db.transaction(f.storeName,"readonly").objectStore(f.storeName),e=g.openCursor(),j=1;e.onsuccess=function(){var a,f,c=e.result;c?(a=c.value,i(a)&&(a=h(a)),f=d(a,c.key,j++),void 0!==f?b(f):c["continue"]()):b()},e.onerror=function(){c(e.error)}})["catch"](c)});return c(b,e),b}function q(a,d,g){var e,f=this;return"string"!=typeof a&&(b.console.warn(a+" used as a key, but it is not a string."),a=String(a)),e=new Promise(function(e,c){var b;f.ready().then(function(){return b=f._dbInfo,d instanceof Blob?z(b.db).then(function(a){return a?d:y(d)}):d}).then(function(d){var f,g=b.db.transaction(b.storeName,"readwrite"),h=g.objectStore(b.storeName);null===d&&(d=void 0),f=h.put(d,a),g.oncomplete=function(){void 0===d&&(d=null),e(d)},g.onabort=g.onerror=function(){var a=f.error?f.error:f.transaction.error;c(a)}})["catch"](c)}),c(e,g),e}function r(a,f){var d,e=this;return"string"!=typeof a&&(b.console.warn(a+" used as a key, but it is not a string."),a=String(a)),d=new Promise(function(c,b){e.ready().then(function(){var g=e._dbInfo,d=g.db.transaction(g.storeName,"readwrite"),h=d.objectStore(g.storeName),f=h["delete"](a);d.oncomplete=function(){c()},d.onerror=function(){b(f.error)},d.onabort=function(){var a=f.error?f.error:f.transaction.error;b(a)}})["catch"](b)}),c(d,f),d}function s(d){var a=this,b=new Promise(function(c,b){a.ready().then(function(){var e=a._dbInfo,d=e.db.transaction(e.storeName,"readwrite"),g=d.objectStore(e.storeName),f=g.clear();d.oncomplete=function(){c()},d.onabort=d.onerror=function(){var a=f.error?f.error:f.transaction.error;b(a)}})["catch"](b)});return c(b,d),b}function t(d){var a=this,b=new Promise(function(c,b){a.ready().then(function(){var e=a._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),d=f.count();d.onsuccess=function(){c(d.result)},d.onerror=function(){b(d.error)}})["catch"](b)});return c(b,d),b}function m(a,e){var b=this,d=new Promise(function(c,d){return 0>a?void c(null):void b.ready().then(function(){var f=b._dbInfo,h=f.db.transaction(f.storeName,"readonly").objectStore(f.storeName),g=!1,e=h.openCursor();e.onsuccess=function(){var b=e.result;return b?void(0===a?c(b.key):g?c(b.key):(g=!0,b.advance(a))):void c(null)},e.onerror=function(){d(e.error)}})["catch"](d)});return c(d,e),d}function v(d){var a=this,b=new Promise(function(c,b){a.ready().then(function(){var e=a._dbInfo,g=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),d=g.openCursor(),f=[];d.onsuccess=function(){var a=d.result;return a?(f.push(a.key),void a["continue"]()):void c(f)},d.onerror=function(){b(d.error)}})["catch"](b)});return c(b,d),b}function c(b,a){a&&b.then(function(b){a(null,b)},function(b){a(b)})}var d,g,f,k,b=this,e=e||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;e&&(d="local-forage-detect-blob-support",k={_driver:"asyncStorage",_initStorage:x,iterate:C,getItem:o,setItem:q,removeItem:r,clear:s,length:t,key:m,keys:v},a["default"]=k)}.call("undefined"!=typeof window?window:self),b.exports=a["default"]},function(b,a,c){"use strict";a.__esModule=!0,function(){function l(b){var d,e=this,a={};if(b)for(d in b)a[d]=b[d];return a.keyPrefix=a.name+"/",a.storeName!==e._defaultConfig.storeName&&(a.keyPrefix+=a.storeName+"/"),e._dbInfo=a,new Promise(function(a,b){a(c(3))}).then(function(b){return a.serializer=b,Promise.resolve()})}function j(e){var a=this,c=a.ready().then(function(){var c,d,e=a._dbInfo.keyPrefix;for(c=b.length-1;c>=0;c--)d=b.key(c),0===d.indexOf(e)&&b.removeItem(d)});return d(c,e),c}function m(a,g){var c,f=this;return"string"!=typeof a&&(e.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=f.ready().then(function(){var d=f._dbInfo,c=b.getItem(d.keyPrefix+a);return c&&(c=d.serializer.deserialize(c)),c}),d(c,g),c}function n(e,f){var a=this,c=a.ready().then(function(){var d,f,c,g=a._dbInfo,h=g.keyPrefix,i=h.length,j=b.length,k=1;for(d=0;j>d;d++)if(f=b.key(d),0===f.indexOf(h)&&(c=b.getItem(f),c&&(c=g.serializer.deserialize(c)),c=e(c,f.substring(i),k++),void 0!==c))return c});return d(c,f),c}function o(e,f){var a=this,c=a.ready().then(function(){var c,d=a._dbInfo;try{c=b.key(e)}catch(f){c=null}return c&&(c=c.substring(d.keyPrefix.length)),c});return d(c,f),c}function h(e){var a=this,c=a.ready().then(function(){var c,d=a._dbInfo,f=b.length,e=[];for(c=0;f>c;c++)0===b.key(c).indexOf(d.keyPrefix)&&e.push(b.key(c).substring(d.keyPrefix.length));return e});return d(c,e),c}function i(b){var c=this,a=c.keys().then(function(a){return a.length});return d(a,b),a}function g(a,g){var c,f=this;return"string"!=typeof a&&(e.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=f.ready().then(function(){var c=f._dbInfo;b.removeItem(c.keyPrefix+a)}),d(c,g),c}function k(a,c,h){var f,g=this;return"string"!=typeof a&&(e.console.warn(a+" used as a key, but it is not a string."),a=String(a)),f=g.ready().then(function(){void 0===c&&(c=null);var d=c;return new Promise(function(h,e){var f=g._dbInfo;f.serializer.serialize(c,function(i,g){if(g)e(g);else try{b.setItem(f.keyPrefix+a,i),h(d)}catch(c){("QuotaExceededError"===c.name||"NS_ERROR_DOM_QUOTA_REACHED"===c.name)&&e(c),e(c)}})})}),d(f,h),f}function d(b,a){a&&b.then(function(b){a(null,b)},function(b){a(b)})}var f,e=this,b=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;b=this.localStorage}catch(p){return}f={_driver:"localStorageWrapper",_initStorage:l,iterate:n,getItem:m,setItem:k,removeItem:g,clear:j,length:i,key:o,keys:h},a["default"]=f}.call("undefined"!=typeof window?window:self),b.exports=a["default"]},function(b,a){"use strict";a.__esModule=!0,function(){function u(a,b){var f,e,d;a=a||[],b=b||{};try{return new Blob(a,b)}catch(g){if("TypeError"!==g.name)throw g;for(f=c.BlobBuilder||c.MSBlobBuilder||c.MozBlobBuilder||c.WebKitBlobBuilder,e=new f,d=0;d<a.length;d+=1)e.append(a[d]);return e.getBlob(b.type)}}function v(a,f){var j,b,k,c="";if(a&&(c=a.toString()),a&&("[object ArrayBuffer]"===a.toString()||a.buffer&&"[object ArrayBuffer]"===a.buffer.toString()))b=d,a instanceof ArrayBuffer?(j=a,b+=g):(j=a.buffer,"[object Int8Array]"===c?b+=i:"[object Uint8Array]"===c?b+=t:"[object Uint8ClampedArray]"===c?b+=l:"[object Int16Array]"===c?b+=m:"[object Uint16Array]"===c?b+=o:"[object Int32Array]"===c?b+=n:"[object Uint32Array]"===c?b+=p:"[object Float32Array]"===c?b+=q:"[object Float64Array]"===c?b+=r:f(new Error("Failed to get type for BinaryArray"))),f(b+e(j));else if("[object Blob]"===c)k=new FileReader,k.onload=function(){var b=w+a.type+"~"+e(this.result);f(d+h+b)},k.readAsArrayBuffer(a);else try{f(JSON.stringify(a))}catch(s){console.error("Couldn't convert value into a JSON string: ",a),f(null,s)}}function x(c){var b,e,w,v,a;if(c.substring(0,f)!==d)return JSON.parse(c);switch(b=c.substring(s),e=c.substring(f,s),e===h&&j.test(b)&&(v=b.match(j),w=v[1],b=b.substring(v[0].length)),a=k(b),e){case g:return a;case h:return u([a],{type:w});case i:return new Int8Array(a);case t:return new Uint8Array(a);case l:return new Uint8ClampedArray(a);case m:return new Int16Array(a);case o:return new Uint16Array(a);case n:return new Int32Array(a);case p:return new Uint32Array(a);case q:return new Float32Array(a);case r:return new Float64Array(a);default:throw new Error("Unkown type: "+e)}}function k(a){var c,j,e,f,k,h,d,i=.75*a.length,l=a.length,g=0;for("="===a[a.length-1]&&(i--,"="===a[a.length-2]&&i--),h=new ArrayBuffer(i),d=new Uint8Array(h),c=0;l>c;c+=4)j=b.indexOf(a[c]),e=b.indexOf(a[c+1]),f=b.indexOf(a[c+2]),k=b.indexOf(a[c+3]),d[g++]=j<<2|e>>4,d[g++]=(15&e)<<4|f>>2,d[g++]=(3&f)<<6|63&k;return h}function e(e){var c,d=new Uint8Array(e),a="";for(c=0;c<d.length;c+=3)a+=b[d[c]>>2],a+=b[(3&d[c])<<4|d[c+1]>>4],a+=b[(15&d[c+1])<<2|d[c+2]>>6],a+=b[63&d[c+2]];return d.length%3===2?a=a.substring(0,a.length-1)+"=":d.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w="~~local_forage_type~",j=/^~~local_forage_type~([^~]+)~/,d="__lfsc__:",f=d.length,g="arbf",h="blob",i="si08",t="ui08",l="uic8",m="si16",n="si32",o="ur16",p="ui32",q="fl32",r="fl64",s=f+g.length,c=this,y={serialize:v,deserialize:x,stringToBuffer:k,bufferToString:e};a["default"]=y}.call("undefined"!=typeof window?window:self),b.exports=a["default"]},function(b,a,c){"use strict";a.__esModule=!0,function(){function l(b){var d,g,f=this,a={db:null};if(b)for(d in b)a[d]="string"!=typeof b[d]?b[d].toString():b[d];return g=new Promise(function(c,d){try{a.db=e(a.name,String(a.version),a.description,a.size)}catch(g){return f.setDriver(f.LOCALSTORAGE).then(function(){return f._initStorage(b)}).then(c)["catch"](d)}a.db.transaction(function(b){b.executeSql("CREATE TABLE IF NOT EXISTS "+a.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){f._dbInfo=a,c()},function(b,a){d(a)})})}),new Promise(function(a,b){a(c(3))}).then(function(b){return a.serializer=b,g})}function i(a,f){var c,e=this;return"string"!=typeof a&&(d.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=new Promise(function(c,b){e.ready().then(function(){var d=e._dbInfo;d.db.transaction(function(e){e.executeSql("SELECT * FROM "+d.storeName+" WHERE key = ? LIMIT 1",[a],function(e,b){var a=b.rows.length?b.rows.item(0).value:null;a&&(a=d.serializer.deserialize(a)),c(a)},function(c,a){b(a)})})})["catch"](b)}),b(c,f),c}function m(d,e){var a=this,c=new Promise(function(b,c){a.ready().then(function(){var e=a._dbInfo;e.db.transaction(function(a){a.executeSql("SELECT * FROM "+e.storeName,[],function(j,h){var c,f,a,g=h.rows,i=g.length;for(c=0;i>c;c++)if(f=g.item(c),a=f.value,a&&(a=e.serializer.deserialize(a)),a=d(a,f.key,c+1),void 0!==a)return void b(a);b()},function(b,a){c(a)})})})["catch"](c)});return b(c,e),c}function n(a,c,g){var e,f=this;return"string"!=typeof a&&(d.console.warn(a+" used as a key, but it is not a string."),a=String(a)),e=new Promise(function(d,b){f.ready().then(function(){var g,e;void 0===c&&(c=null),g=c,e=f._dbInfo,e.serializer.serialize(c,function(f,c){c?b(c):e.db.transaction(function(c){c.executeSql("INSERT OR REPLACE INTO "+e.storeName+" (key, value) VALUES (?, ?)",[a,f],function(){d(g)},function(c,a){b(a)})},function(a){a.code===a.QUOTA_ERR&&b(a)})})})["catch"](b)}),b(e,g),e}function g(a,f){var c,e=this;return"string"!=typeof a&&(d.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=new Promise(function(c,b){e.ready().then(function(){var d=e._dbInfo;d.db.transaction(function(e){e.executeSql("DELETE FROM "+d.storeName+" WHERE key = ?",[a],function(){c()},function(c,a){b(a)})})})["catch"](b)}),b(c,f),c}function h(d){var a=this,c=new Promise(function(c,b){a.ready().then(function(){var d=a._dbInfo;d.db.transaction(function(a){a.executeSql("DELETE FROM "+d.storeName,[],function(){c()},function(c,a){b(a)})})})["catch"](b)});return b(c,d),c}function o(d){var a=this,c=new Promise(function(c,b){a.ready().then(function(){var d=a._dbInfo;d.db.transaction(function(a){a.executeSql("SELECT COUNT(key) as c FROM "+d.storeName,[],function(d,a){var b=a.rows.item(0).c;c(b)},function(c,a){b(a)})})})["catch"](b)});return b(c,d),c}function j(d,e){var a=this,c=new Promise(function(c,b){a.ready().then(function(){var e=a._dbInfo;e.db.transaction(function(a){a.executeSql("SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[d+1],function(d,a){var b=a.rows.length?a.rows.item(0).key:null;c(b)},function(c,a){b(a)})})})["catch"](b)});return b(c,e),c}function k(d){var a=this,c=new Promise(function(c,b){a.ready().then(function(){var d=a._dbInfo;d.db.transaction(function(a){a.executeSql("SELECT key FROM "+d.storeName,[],function(e,b){var a,d=[];for(a=0;a<b.rows.length;a++)d.push(b.rows.item(a).key);c(d)},function(c,a){b(a)})})})["catch"](b)});return b(c,d),c}function b(b,a){a&&b.then(function(b){a(null,b)},function(b){a(b)})}var f,d=this,e=this.openDatabase;e&&(f={_driver:"webSQLStorage",_initStorage:l,iterate:m,getItem:i,setItem:n,removeItem:g,clear:h,length:o,key:j,keys:k},a["default"]=f)}.call("undefined"!=typeof window?window:self),b.exports=a["default"]}])}),function(t){"use strict";function e(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function r(a,b){return a<<b|a>>>32-b}function f(a,b,c,d,f,g){return e(r(e(e(b,a),e(d,g)),f),c)}function a(b,a,c,d,e,g,h){return f(a&c|~a&d,b,a,e,g,h)}function b(c,a,d,b,e,g,h){return f(a&b|d&~b,c,a,e,g,h)}function c(b,a,c,d,e,g,h){return f(a^c^d,b,a,e,g,h)}function d(b,a,c,d,e,g,h){return f(c^(a|~d),b,a,e,g,h)}function g(k,l){k[l>>5]|=128<<l%32,k[(l+64>>>9<<4)+14]=l;var j,o,n,p,m,i=1732584193,h=-271733879,g=-1732584194,f=271733878;for(j=0;j<k.length;j+=16)o=i,n=h,p=g,m=f,i=a(i,h,g,f,k[j],7,-680876936),f=a(f,i,h,g,k[j+1],12,-389564586),g=a(g,f,i,h,k[j+2],17,606105819),h=a(h,g,f,i,k[j+3],22,-1044525330),i=a(i,h,g,f,k[j+4],7,-176418897),f=a(f,i,h,g,k[j+5],12,1200080426),g=a(g,f,i,h,k[j+6],17,-1473231341),h=a(h,g,f,i,k[j+7],22,-45705983),i=a(i,h,g,f,k[j+8],7,1770035416),f=a(f,i,h,g,k[j+9],12,-1958414417),g=a(g,f,i,h,k[j+10],17,-42063),h=a(h,g,f,i,k[j+11],22,-1990404162),i=a(i,h,g,f,k[j+12],7,1804603682),f=a(f,i,h,g,k[j+13],12,-40341101),g=a(g,f,i,h,k[j+14],17,-1502002290),h=a(h,g,f,i,k[j+15],22,1236535329),i=b(i,h,g,f,k[j+1],5,-165796510),f=b(f,i,h,g,k[j+6],9,-1069501632),g=b(g,f,i,h,k[j+11],14,643717713),h=b(h,g,f,i,k[j],20,-373897302),i=b(i,h,g,f,k[j+5],5,-701558691),f=b(f,i,h,g,k[j+10],9,38016083),g=b(g,f,i,h,k[j+15],14,-660478335),h=b(h,g,f,i,k[j+4],20,-405537848),i=b(i,h,g,f,k[j+9],5,568446438),f=b(f,i,h,g,k[j+14],9,-1019803690),g=b(g,f,i,h,k[j+3],14,-187363961),h=b(h,g,f,i,k[j+8],20,1163531501),i=b(i,h,g,f,k[j+13],5,-1444681467),f=b(f,i,h,g,k[j+2],9,-51403784),g=b(g,f,i,h,k[j+7],14,1735328473),h=b(h,g,f,i,k[j+12],20,-1926607734),i=c(i,h,g,f,k[j+5],4,-378558),f=c(f,i,h,g,k[j+8],11,-2022574463),g=c(g,f,i,h,k[j+11],16,1839030562),h=c(h,g,f,i,k[j+14],23,-35309556),i=c(i,h,g,f,k[j+1],4,-1530992060),f=c(f,i,h,g,k[j+4],11,1272893353),g=c(g,f,i,h,k[j+7],16,-155497632),h=c(h,g,f,i,k[j+10],23,-1094730640),i=c(i,h,g,f,k[j+13],4,681279174),f=c(f,i,h,g,k[j],11,-358537222),g=c(g,f,i,h,k[j+3],16,-722521979),h=c(h,g,f,i,k[j+6],23,76029189),i=c(i,h,g,f,k[j+9],4,-640364487),f=c(f,i,h,g,k[j+12],11,-421815835),g=c(g,f,i,h,k[j+15],16,530742520),h=c(h,g,f,i,k[j+2],23,-995338651),i=d(i,h,g,f,k[j],6,-198630844),f=d(f,i,h,g,k[j+7],10,1126891415),g=d(g,f,i,h,k[j+14],15,-1416354905),h=d(h,g,f,i,k[j+5],21,-57434055),i=d(i,h,g,f,k[j+12],6,1700485571),f=d(f,i,h,g,k[j+3],10,-1894986606),g=d(g,f,i,h,k[j+10],15,-1051523),h=d(h,g,f,i,k[j+1],21,-2054922799),i=d(i,h,g,f,k[j+8],6,1873313359),f=d(f,i,h,g,k[j+15],10,-30611744),g=d(g,f,i,h,k[j+6],15,-1560198380),h=d(h,g,f,i,k[j+13],21,1309151649),i=d(i,h,g,f,k[j+4],6,-145523070),f=d(f,i,h,g,k[j+11],10,-1120210379),g=d(g,f,i,h,k[j+2],15,718787259),h=d(h,g,f,i,k[j+9],21,-343485551),i=e(i,o),h=e(h,n),g=e(g,p),f=e(f,m);return[i,h,g,f]}function j(b){var a,c="";for(a=0;a<32*b.length;a+=8)c+=String.fromCharCode(b[a>>5]>>>a%32&255);return c}function h(c){var a,b=[];for(b[(c.length>>2)-1]=void 0,a=0;a<b.length;a+=1)b[a]=0;for(a=0;a<8*c.length;a+=8)b[a>>5]|=(255&c.charCodeAt(a/8))<<a%32;return b}function p(a){return j(g(h(a),8*a.length))}function o(e,f){var a,i,b=h(e),c=[],d=[];for(c[15]=d[15]=void 0,b.length>16&&(b=g(b,8*e.length)),a=0;16>a;a+=1)c[a]=909522486^b[a],d[a]=1549556828^b[a];return i=g(c.concat(h(f)),512+8*f.length),j(g(d.concat(i),640))}function n(c){var b,a,d="0123456789abcdef",e="";for(a=0;a<c.length;a+=1)b=c.charCodeAt(a),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function i(a){return unescape(encodeURIComponent(a))}function l(a){return p(i(a))}function q(a){return n(l(a))}function m(a,b){return o(i(a),i(b))}function s(a,b){return n(m(a,b))}function k(a,b,c){return b?c?m(b,a):s(b,a):c?l(a):q(a)}"function"==typeof define&&define.amd?define(function(){return k}):t.md5=k}(this),d="items",a={},self.addEventListener("message",m,!1);