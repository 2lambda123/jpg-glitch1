function k(a){a&&a.data&&a.data.glitch&&a.data.glitch.base64&&a.data.glitch.parameters?self.postMessage({glitched:l(a.data.glitch.base64,a.data.glitch.parameters)}):self.postMessage(a.data)}function l(c,f){for(d=f,e=i(c),g=m(e),a=0,b=d.iterations;b>a;a++)n(e,g,d.seed,d.amount,a,d.iterations);return j(e)}function n(d,g,j,i,e,f){var h,a=d.length-g-4,c=parseInt(a/f*e,10),k=parseInt(a/f*(e+1),10),l=k-c,b=parseInt(c+l*j,10);b>a&&(b=a),h=Math.floor(g+b),d[h]=Math.floor(256*i)}function i(g){var h,c,d,e=[];for(a=23,b=g.length;b>a;a++){switch(c=f[g.charAt(a)],h=(a-23)%4){case 1:e.push(d<<2|c>>4);break;case 2:e.push((15&d)<<4|c>>2);break;case 3:e.push((3&d)<<6|c)}d=c}return e}function j(h){var g,e,f,d=["data:image/jpeg;base64,"];for(a=0,b=h.length;b>a;a++){switch(e=h[a],g=a%3){case 0:d.push(c[e>>2]);break;case 1:d.push(c[(3&f)<<4|e>>4]);break;case 2:d.push(c[(15&f)<<2|e>>6]),d.push(c[63&e])}f=e}return 0===g?(d.push(c[(3&f)<<4]),d.push("==")):1===g&&(d.push(c[(15&f)<<2]),d.push("=")),d.join("")}function m(c){var d=417;for(a=0,b=c.length;b>a;a++)if(255===c[a]&&218===c[a+1]){d=a+2;break}return d}var h,c,f,o,e,g,d,a,b;self.addEventListener("message",k,!1),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=h.split(""),f={},g=0,a=0,b=0,c.forEach(function(a,b){f[a]=b});